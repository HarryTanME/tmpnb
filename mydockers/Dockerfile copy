FROM floydhub/tensorflow:1.2.1-py2_aws.7

USER root
RUN apt-get install -y unzip && \
    apt-get install -y libncurses5-dev && \
    apt-get install -y software-properties-common && \
    apt-add-repository -y universe && \
    apt-get -y update && \
    apt-get install -y python-dev && \
    apt-get install -y python-pip && \
    apt-get install -y libjpeg8-dev && \
    ln -s /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib && \
    pip install pillow && \
    apt-get install -y libjpeg8 libjpeg62-dev libfreetype6 libfreetype6-dev && \
    pip install virtualenv

RUN wget https://raw.githubusercontent.com/HarryTanME/video_mgt/master/commands/docker_init.sh && \
    sh docker_init.sh && \
    wget https://raw.githubusercontent.com/tensorflow/tensorflow/master/tensorflow/tools/docker/jupyter_notebook_config.py && \
    cp jupyter_notebook_config.py ~/.jupyter/

# TensorBoard
EXPOSE 6006 8888


CMD jupyter notebook "$@"  --allow-root  --port=8888 --ip=0.0.0.0 ~